@model PharmixWebApi.CustomModel.CustomReportModel
@{ViewBag.Title = "Vmp Details";}
<section class="content-header">
    <h1>
        Pharmix -Vmp Details
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Dashboard</a></li>
        <li><a href="#">Reports</a></li>
        <li class="active">Vmp</li>
    </ol>
</section>
<!-- Main content -->
<section class="content">
    <!-- SELECT2 EXAMPLE -->
    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">filters</h3>
            <div class="material-switch pull-right" style="padding-right:800px;">
                <input id="AllItem" name="AllItem" type="checkbox" onclick="CheckallItem();" />All Items &nbsp;
                <label for="AllItem" class="label-success"></label>
            </div>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>
            </div>
        </div>
        <!-- /.box-header -->
        <div class="box-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>ChangetSet From</label>
                        @if (Model.DmdChangeSetDetails != null)
                        {
                            <select class="form-control select2" style="width: 100%;" onchange="GetToChangeSetId(this.value);"
                                    id="ddlChangetSetFrom" name="ddlChangetSetFrom"
                                    asp-items="@(new SelectList(Model.DmdChangeSetDetails, "DmdChangeSetDetailID", "Description"))"></select>
                        }
                    </div>
                    <!-- /.form-group -->
                    <div class="form-group">

                        <a class="btn btn-primary form-control" href="#AllItems" data-toggle="tab" onclick="GetVmpDetailsForAllItems();" id="FetchReport"
                           name="FetchReport">Fetch Report</a>

                    </div>
                    <div class="form-group">
                        <a class="btn btn-success form-control" href="#" onclick="ExportDataToCSVData(true);">Download SQL</a>
                    </div>
                    <!-- /.form-group -->
                </div>
                <!-- /.col -->
                <div class="col-md-6">
                    <div class="form-group">
                        <div class="form-group">
                            <label>ChangetSet To</label>
                            <select id="ddlChangetSetTo" name="ddlChangetSetTo" class="form-control select2" style="width: 100%;">
                                <option value="0">--Select--</option>
                            </select>

                        </div>
                    </div>
                    <!-- /.form-group -->
                    <div class="form-group">
                        <a class="btn btn-primary form-control" href="#" onclick="ExportDataToCSVData(false);">Export to CSV</a>
                    </div>

                </div>
                <!-- /.col -->
            </div>
        </div>
    </div>


</section>

<div class="box-body">
    <div class="row">
        <div class="col-md-12">
            <br />
            <div class="form-group">
                <div class="nav-tabs-custom">
                    <ul class="nav nav-tabs">

                        <li class="active"><a href="#AllItems" data-toggle="tab" onclick="GetVmpDetailsForAllItems();">All Items </a></li>
                        <li><a href="#ToBeInserted" data-toggle="tab" onclick="GetVmpDetailsForInsert();">To Be Inserted</a></li>
                        <li><a href="#ToBeUpdated" data-toggle="tab" onclick="GetVmpDetailsForUpdate();">To Be Updated</a></li>
                        <li><a href="#ToBeDeleted" data-toggle="tab" onclick="GetVmpDetailsForDelete();">To Be Deleted</a></li>

                    </ul>
                    <div class="tab-content" style="overflow-x:scroll;">
                        <div class="tab-pane active" id="AllItems">
                            <table id="vtmDetailsAllItems" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th>VPID Current</th>
                                        <th>VPIDDT Current</th>
                                        <th>VPIDPREV Current</th>
                                        <th>VTMID Current</th>
                                        <th>INVALID Current</th>
                                        <th>NM Current</th>
                                        <th>ABBREVNM Current</th>
                                        <th>BASISCD Current</th>
                                        <th>NMDT Current</th>
                                        <th>NMPREV Current</th>
                                        <th>BASIS_PREVCD Current</th>
                                        <th>NMCHANGECD Current</th>
                                        <th>COMBPRODCD Current</th>
                                        <th>PRES_STATCD Current</th>
                                        <th>SUG_F Current</th>
                                        <th>GLU_F Current</th>
                                        <th>PRES_F Current</th>
                                        <th>CFC_F Current</th>
                                        <th>NON_AVAILCD Current</th>
                                        <th>NON_AVAILDT Current</th>
                                        <th>DF_INDCD Current</th>
                                        <th>UDFS Current</th>
                                        <th>UDFS_UOMCD Current</th>
                                        <th>UNIT_DOSE_UOMCD Current</th>
                                        <th>VMPS_Id Current</th>
                                        <th>VPID Previous</th>
                                        <th>VPIDDT Previous</th>
                                        <th>VPIDPREV Previous</th>
                                        <th>VTMID Previous</th>
                                        <th>INVALID Previous</th>
                                        <th>NM Previous</th>
                                        <th>ABBREVNM Previous</th>
                                        <th>BASISCD Previous</th>
                                        <th>NMDT Previous</th>
                                        <th>NMPREV Previous</th>
                                        <th>BASIS Previous_PREVCD</th>
                                        <th>NMCHANGECD Previous</th>
                                        <th>COMBPRODCD Previous</th>
                                        <th>PRES_STATCD Previous</th>
                                        <th>SUG_F Previous</th>
                                        <th>GLU_F Previous</th>
                                        <th>PRES_F Previous</th>
                                        <th>CFC_F Previous</th>
                                        <th>NON_AVAILCD Previous</th>
                                        <th>NON_AVAILDT Previous</th>
                                        <th>DF_INDCD Previous</th>
                                        <th>UDFS Previous</th>
                                        <th>UDFS_UOMCD Previous</th>
                                        <th>UNIT_DOSE_UOMCD Previous</th>
                                        <th>VMPS_Id Previous</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <div class="tab-pane" id="ToBeInserted">
                            <table id="vmpDetails" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th>VPID</th>
                                        <th>VPIDDT</th>
                                        <th>VPIDPREV</th>
                                        <th>VTMID</th>
                                        <th>INVALID</th>
                                        <th>NM</th>
                                        <th>ABBREVNM</th>
                                        <th>BASISCD</th>
                                        <th>NMDT</th>
                                        <th>NMPREV</th>
                                        <th>BASIS_PREVCD</th>
                                        <th>NMCHANGECD</th>
                                        <th>COMBPRODCD</th>
                                        <th>PRES_STATCD</th>
                                        <th>SUG_F</th>
                                        <th>GLU_F</th>
                                        <th>PRES_F</th>
                                        <th>CFC_F</th>
                                        <th>NON_AVAILCD</th>
                                        <th>NON_AVAILDT</th>
                                        <th>DF_INDCD</th>
                                        <th>UDFS</th>
                                        <th>UDFS_UOMCD</th>
                                        <th>UNIT_DOSE_UOMCD</th>
                                        <th>VMPS_Id</th>

                                    </tr>
                                </thead>
                            </table>
                        </div>

                        <div class="tab-pane" id="ToBeUpdated">
                            <table id="vtmDetailsUpdate" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th>VPID Current</th>
                                        <th>VPIDDT Current</th>
                                        <th>VPIDPREV Current</th>
                                        <th>VTMID Current</th>
                                        <th>INVALID Current</th>
                                        <th>NM Current</th>
                                        <th>ABBREVNM Current</th>
                                        <th>BASISCD Current</th>
                                        <th>NMDT Current</th>
                                        <th>NMPREV Current</th>
                                        <th>BASIS_PREVCD Current</th>
                                        <th>NMCHANGECD Current</th>
                                        <th>COMBPRODCD Current</th>
                                        <th>PRES_STATCD Current</th>
                                        <th>SUG_F Current</th>
                                        <th>GLU_F Current</th>
                                        <th>PRES_F Current</th>
                                        <th>CFC_F Current</th>
                                        <th>NON_AVAILCD Current</th>
                                        <th>NON_AVAILDT Current</th>
                                        <th>DF_INDCD Current</th>
                                        <th>UDFS Current</th>
                                        <th>UDFS_UOMCD Current</th>
                                        <th>UNIT_DOSE_UOMCD Current</th>
                                        <th>VMPS_Id Current</th>
                                        <th>VPID Previous</th>
                                        <th>VPIDDT Previous</th>
                                        <th>VPIDPREV Previous</th>
                                        <th>VTMID Previous</th>
                                        <th>INVALID Previous</th>
                                        <th>NM Previous</th>
                                        <th>ABBREVNM Previous</th>
                                        <th>BASISCD Previous</th>
                                        <th>NMDT Previous</th>
                                        <th>NMPREV Previous</th>
                                        <th>BASIS Previous_PREVCD</th>
                                        <th>NMCHANGECD Previous</th>
                                        <th>COMBPRODCD Previous</th>
                                        <th>PRES_STATCD Previous</th>
                                        <th>SUG_F Previous</th>
                                        <th>GLU_F Previous</th>
                                        <th>PRES_F Previous</th>
                                        <th>CFC_F Previous</th>
                                        <th>NON_AVAILCD Previous</th>
                                        <th>NON_AVAILDT Previous</th>
                                        <th>DF_INDCD Previous</th>
                                        <th>UDFS Previous</th>
                                        <th>UDFS_UOMCD Previous</th>
                                        <th>UNIT_DOSE_UOMCD Previous</th>
                                        <th>VMPS_Id Previous</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>

                        <div class="tab-pane" id="ToBeDeleted">
                            <table id="vtmDetailsDelete" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th>VPID</th>
                                        <th>VPIDDT</th>
                                        <th>VPIDPREV</th>
                                        <th>VTMID</th>
                                        <th>INVALID</th>
                                        <th>NM</th>
                                        <th>ABBREVNM</th>
                                        <th>BASISCD</th>
                                        <th>NMDT</th>
                                        <th>NMPREV</th>
                                        <th>BASIS_PREVCD</th>
                                        <th>NMCHANGECD</th>
                                        <th>COMBPRODCD</th>
                                        <th>PRES_STATCD</th>
                                        <th>SUG_F</th>
                                        <th>GLU_F</th>
                                        <th>PRES_F</th>
                                        <th>CFC_F</th>
                                        <th>NON_AVAILCD</th>
                                        <th>NON_AVAILDT</th>
                                        <th>DF_INDCD</th>
                                        <th>UDFS</th>
                                        <th>UDFS_UOMCD</th>
                                        <th>UNIT_DOSE_UOMCD</th>
                                        <th>VMPS_Id</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                    <!-- /.tab-content -->
                </div>
                <!-- /.box-body -->
            </div>
            <!-- /.box -->
        </div>
    </div>
</div>

<input type="hidden" id="TabId" value=@ViewBag.TabId />
<input type="hidden" id="totalCount" value=@Model.totalCount />
<input type="hidden" id="hdnpageId" value=@ViewBag.PageId />
<input type="hidden" id="hdnSearchValue" value=@Model.SearchValue />
<input type="hidden" id="hdnBusinessUser" value=@User.Identity.Name />
<script>

    $(document).ready(function () {

        GetVmpDetailsForAllItems();
        CheckallItem();


    });

    function GetVmpDetailsForAllItems() {

        $("#vtmDetailsAllItems").DataTable().destroy();
        var TabId = "AllItems";
        var totalCount = document.getElementById("totalCount").value;
        var pageId = document.getElementById("hdnpageId").value;
        var changetSetFrom = $("#ddlChangetSetFrom").val();
        var changetSetTo = $("#ddlChangetSetTo").val();
        var searchValue = document.getElementById("hdnSearchValue").value;

        $("#vtmDetailsAllItems").DataTable({
            "processing": true, // for show progress bar
            "serverSide": true, // for process server side
            "filter": true, // this is for disable filter (search box)
            "orderMulti": false, // for disable multiple column at once
            "iDisplayLength": 50,
            "ajax": {
                "url": "/Changeset/LoadData?tabID=" + TabId + "&TotalCount=" + totalCount + "&PageId=" + pageId + "&changetSetFrom=" + changetSetFrom + "&changetSetTo=" + changetSetTo + "&universalSearch=" + searchValue,
                "type": "POST",
                "datatype": "json"
            }, "initComplete": function () {
                var $searchInput = $('div.dataTables_filter input');
                $searchInput.unbind();
                $searchInput.bind('keyup', function (e) {
                    if (this.value.length > 3 || this.value.length == "") {
                        $("#vtmDetailsAllItems").DataTable().search(this.value).draw();
                    }
                });
            }, "order": [[5, "asc"]],
            "aaSorting": [],
            "columnDefs":
            [{
                "targets": [0],
                "visible": false,
                "searchable": false
            }],
            "columns": [

                
                { "data": "VPIDChangeset", "name": "VPIDChangeset", "autoWidth": true },
                { "data": "VPIDDTChangeset", "name": "VPIDDTChangeset", "autoWidth": true },
                { "data": "VPIDPREVChangeset", "name": "VPIDPREVChangeset", "autoWidth": true },
                { "data": "VTMIDChangeset", "name": "VTMIDChangeset", "autoWidth": true },
                { "data": "INVALIDChangeset", "name": "INVALIDChangeset", "autoWidth": true },
                { "data": "NMChangeset", "name": "NMChangeset", "autoWidth": true },
                { "data": "ABBREVNMChangeset", "name": "ABBREVNMChangeset", "autoWidth": true },
                { "data": "BASISCDChangeset", "name": "BASISCDChangeset", "autoWidth": true },
                { "data": "NMDTChangeset", "name": "NMDTChangeset", "autoWidth": true },
                { "data": "NMPREVChangeset", "name": "NMPREVChangeset", "autoWidth": true },
                { "data": "BASISChangeset_PREVCD", "name": "BASISChangeset_PREVCD", "autoWidth": true },
                { "data": "NMCHANGECDChangeset", "name": "NMCHANGECDChangeset", "autoWidth": true },
                { "data": "COMBPRODCDChangeset", "name": "COMBPRODCDChangeset", "autoWidth": true },
                { "data": "PRES_STATCDChangeset", "name": "PRES_STATCDChangeset", "autoWidth": true },
                { "data": "SUG_FChangeset", "name": "SUG_FChangeset", "autoWidth": true },
                { "data": "GLU_FChangeset", "name": "GLU_FChangeset", "autoWidth": true },
                { "data": "PRES_FChangeset", "name": "PRES_FChangeset", "autoWidth": true },
                { "data": "CFC_FChangeset", "name": "CFC_FChangeset", "autoWidth": true },
                { "data": "NON_AVAILCDChangeset", "name": "NON_AVAILCDChangeset", "autoWidth": true },
                { "data": "NON_AVAILDTChangeset", "name": "NON_AVAILDTChangeset", "autoWidth": true },
                { "data": "DF_INDCDChangeset", "name": "DF_INDCDChangeset", "autoWidth": true },
                { "data": "UDFSChangeset", "name": "UDFSChangeset", "autoWidth": true },
                { "data": "UDFS_UOMCDChangeset", "name": "UDFS_UOMCDChangeset", "autoWidth": true },
                { "data": "UNIT_DOSE_UOMCDChangeset", "name": "UNIT_DOSE_UOMCDChangeset", "autoWidth": true },
                { "data": "VMPS_IdChangeset", "name": "VMPS_IdChangeset", "autoWidth": true },
                { "data": "VPIDLive", "name": "VPIDLive", "autoWidth": true },
                { "data": "VPIDDTLive", "name": "VPIDDTLive", "autoWidth": true },
                { "data": "VPIDPREVLive", "name": "VPIDPREVLive", "autoWidth": true },
                { "data": "VTMIDLive", "name": "VTMIDLive", "autoWidth": true },
                { "data": "INVALIDLive", "name": "INVALIDLive", "autoWidth": true },
                { "data": "NMLive", "name": "NMLive", "autoWidth": true },
                { "data": "ABBREVNMLive", "name": "ABBREVNMLive", "autoWidth": true },
                { "data": "BASISCDLive", "name": "BASISCDLive", "autoWidth": true },
                { "data": "NMDTLive", "name": "NMDTLive", "autoWidth": true },
                { "data": "NMPREVLive", "name": "NMPREVLive", "autoWidth": true },
                { "data": "BASIS_PREVCDLive", "name": "BASIS_PREVCDLive", "autoWidth": true },
                { "data": "NMCHANGECDLive", "name": "NMCHANGECDLive", "autoWidth": true },
                { "data": "COMBPRODCDLive", "name": "COMBPRODCDLive", "autoWidth": true },
                { "data": "PRES_STATCDLive", "name": "PRES_STATCDLive", "autoWidth": true },
                { "data": "SUG_FLive", "name": "SUG_FLive", "autoWidth": true },
                { "data": "GLU_FLive", "name": "GLU_FLive", "autoWidth": true },
                { "data": "PRES_FLive", "name": "PRES_FLive", "autoWidth": true },
                { "data": "CFC_FLive", "name": "CFC_FLive", "autoWidth": true },
                { "data": "NON_AVAILCDLive", "name": "NON_AVAILCDLive", "autoWidth": true },
                { "data": "NON_AVAILDTLive", "name": "NON_AVAILDTLive", "autoWidth": true },
                { "data": "DF_INDCDLive", "name": "DF_INDCDLive", "autoWidth": true },
                { "data": "UDFSLive", "name": "UDFSLive", "autoWidth": true },
                { "data": "UDFS_UOMCDLive", "name": "UDFS_UOMCDLive", "autoWidth": true },
                { "data": "UNIT_DOSE_UOMCDLive", "name": "UNIT_DOSE_UOMCDLive", "autoWidth": true },
                { "data": "VMPS_IdLive", "name": "VMPS_IdLive", "autoWidth": true },

            ],
            "fnDrawCallback": function (oSettings) {
                // Select first tab
                $('.nav-tabs a:first').tab('show')
            }
        });
    }

    function GetVmpDetailsForInsert() {

        $("#vmpDetails").DataTable().destroy();
        var TabId = "ToBeInserted";
        var totalCount = document.getElementById("totalCount").value;
        var pageId = document.getElementById("hdnpageId").value;
        var changetSetFrom = $("#ddlChangetSetFrom").val();
        var changetSetTo = $("#ddlChangetSetTo").val();
        var searchValue = document.getElementById("hdnSearchValue").value;

        $("#vmpDetails").DataTable({
            "processing": true, // for show progress bar
            "serverSide": true, // for process server side
            "filter": true, // this is for disable filter (search box)
            "orderMulti": false, // for disable multiple column at once
            "ajax": {
                "url": "/Changeset/LoadData?tabID=" + TabId + "&TotalCount=" + totalCount + "&PageId=" + pageId + "&changetSetFrom=" + changetSetFrom + "&changetSetTo=" + changetSetTo + "&universalSearch=" + searchValue,
                "type": "POST",
                "datatype": "json"
            }, "initComplete": function () {
                var $searchInput = $('div.dataTables_filter input');
                $searchInput.unbind();
                $searchInput.bind('keyup', function (e) {
                    if (this.value.length > 3 || this.value.length == "") {
                        $("#vmpDetails").DataTable().search(this.value).draw();
                    }
                });
            }, "order": [[5, "asc"]],
            "aaSorting": [],
            "columnDefs":
            [{
                //"targets": [0],
                "visible": false,
                "searchable": false
            }],
            "columns": [

                { "data": "VPIDChangeset", "name": "VPIDChangeset", "autoWidth": true },
                { "data": "VPIDDTChangeset", "name": "VPIDDTChangeset", "autoWidth": true },
                { "data": "VPIDPREVChangeset", "name": "VPIDPREVChangeset", "autoWidth": true },
                { "data": "VTMIDChangeset", "name": "VTMIDChangeset", "autoWidth": true },
                { "data": "INVALIDChangeset", "name": "INVALIDChangeset", "autoWidth": true },
                { "data": "NMChangeset", "name": "NMChangeset", "autoWidth": true },
                { "data": "ABBREVNMChangeset", "name": "ABBREVNMChangeset", "autoWidth": true },
                { "data": "BASISCDChangeset", "name": "BASISCDChangeset", "autoWidth": true },
                { "data": "NMDTChangeset", "name": "NMDTChangeset", "autoWidth": true },
                { "data": "NMPREVChangeset", "name": "NMPREVChangeset", "autoWidth": true },
                { "data": "BASISChangeset_PREVCD", "name": "BASISChangeset_PREVCD", "autoWidth": true },
                { "data": "NMCHANGECDChangeset", "name": "NMCHANGECDChangeset", "autoWidth": true },
                { "data": "COMBPRODCDChangeset", "name": "COMBPRODCDChangeset", "autoWidth": true },
                { "data": "PRES_STATCDChangeset", "name": "PRES_STATCDChangeset", "autoWidth": true },
                { "data": "SUG_FChangeset", "name": "SUG_FChangeset", "autoWidth": true },
                { "data": "GLU_FChangeset", "name": "GLU_FChangeset", "autoWidth": true },
                { "data": "PRES_FChangeset", "name": "PRES_FChangeset", "autoWidth": true },
                { "data": "CFC_FChangeset", "name": "CFC_FChangeset", "autoWidth": true },
                { "data": "NON_AVAILCDChangeset", "name": "NON_AVAILCDChangeset", "autoWidth": true },
                { "data": "NON_AVAILDTChangeset", "name": "NON_AVAILDTChangeset", "autoWidth": true },
                { "data": "DF_INDCDChangeset", "name": "DF_INDCDChangeset", "autoWidth": true },
                { "data": "UDFSChangeset", "name": "UDFSChangeset", "autoWidth": true },
                { "data": "UDFS_UOMCDChangeset", "name": "UDFS_UOMCDChangeset", "autoWidth": true },
                { "data": "UNIT_DOSE_UOMCDChangeset", "name": "UNIT_DOSE_UOMCDChangeset", "autoWidth": true },
                { "data": "VMPS_IdChangeset", "name": "VMPS_IdChangeset", "autoWidth": true },

            ]
        });
     }

    function GetVmpDetailsForUpdate() {

        $("#vtmDetailsUpdate").DataTable().destroy();
        var TabId = "ToBeUpdated";
        var totalCount = document.getElementById("totalCount").value;
        var pageId = document.getElementById("hdnpageId").value;
        var changetSetFrom = $("#ddlChangetSetFrom").val();
        var changetSetTo = $("#ddlChangetSetTo").val();
        var searchValue = document.getElementById("hdnSearchValue").value;

        $("#vtmDetailsUpdate").DataTable({
            "processing": true, // for show progress bar
            "serverSide": true, // for process server side
            "filter": true, // this is for disable filter (search box)
            "orderMulti": false, // for disable multiple column at once
            "ajax": {
                "url": "/Changeset/LoadData?tabID=" + TabId + "&TotalCount=" + totalCount + "&PageId=" + pageId + "&changetSetFrom=" + changetSetFrom + "&changetSetTo=" + changetSetTo + "&universalSearch=" + searchValue,
                "type": "POST",
                "datatype": "json"
            }, "initComplete": function () {
                var $searchInput = $('div.dataTables_filter input');
                $searchInput.unbind();
                $searchInput.bind('keyup', function (e) {
                    if (this.value.length > 3 || this.value.length == "") {
                        $("#vtmDetailsUpdate").DataTable().search(this.value).draw();
                    }
                });
            }, "order": [[5, "asc"]],
            "aaSorting": [],
            "columnDefs":
            [{
                "targets": [0],
                "visible": false,
                "searchable": false
            }],
            "columns": [

                { "data": "VPIDChangeset", "name": "VPIDChangeset", "autoWidth": true },
                { "data": "VPIDDTChangeset", "name": "VPIDDTChangeset", "autoWidth": true },
                { "data": "VPIDPREVChangeset", "name": "VPIDPREVChangeset", "autoWidth": true },
                { "data": "VTMIDChangeset", "name": "VTMIDChangeset", "autoWidth": true },
                { "data": "INVALIDChangeset", "name": "INVALIDChangeset", "autoWidth": true },
                { "data": "NMChangeset", "name": "NMChangeset", "autoWidth": true },
                { "data": "ABBREVNMChangeset", "name": "ABBREVNMChangeset", "autoWidth": true },
                { "data": "BASISCDChangeset", "name": "BASISCDChangeset", "autoWidth": true },
                { "data": "NMDTChangeset", "name": "NMDTChangeset", "autoWidth": true },
                { "data": "NMPREVChangeset", "name": "NMPREVChangeset", "autoWidth": true },
                { "data": "BASISChangeset_PREVCD", "name": "BASISChangeset_PREVCD", "autoWidth": true },
                { "data": "NMCHANGECDChangeset", "name": "NMCHANGECDChangeset", "autoWidth": true },
                { "data": "COMBPRODCDChangeset", "name": "COMBPRODCDChangeset", "autoWidth": true },
                { "data": "PRES_STATCDChangeset", "name": "PRES_STATCDChangeset", "autoWidth": true },
                { "data": "SUG_FChangeset", "name": "SUG_FChangeset", "autoWidth": true },
                { "data": "GLU_FChangeset", "name": "GLU_FChangeset", "autoWidth": true },
                { "data": "PRES_FChangeset", "name": "PRES_FChangeset", "autoWidth": true },
                { "data": "CFC_FChangeset", "name": "CFC_FChangeset", "autoWidth": true },
                { "data": "NON_AVAILCDChangeset", "name": "NON_AVAILCDChangeset", "autoWidth": true },
                { "data": "NON_AVAILDTChangeset", "name": "NON_AVAILDTChangeset", "autoWidth": true },
                { "data": "DF_INDCDChangeset", "name": "DF_INDCDChangeset", "autoWidth": true },
                { "data": "UDFSChangeset", "name": "UDFSChangeset", "autoWidth": true },
                { "data": "UDFS_UOMCDChangeset", "name": "UDFS_UOMCDChangeset", "autoWidth": true },
                { "data": "UNIT_DOSE_UOMCDChangeset", "name": "UNIT_DOSE_UOMCDChangeset", "autoWidth": true },
                { "data": "VMPS_IdChangeset", "name": "VMPS_IdChangeset", "autoWidth": true },
                { "data": "VPIDLive", "name": "VPIDLive", "autoWidth": true },
                { "data": "VPIDDTLive", "name": "VPIDDTLive", "autoWidth": true },
                { "data": "VPIDPREVLive", "name": "VPIDPREVLive", "autoWidth": true },
                { "data": "VTMIDLive", "name": "VTMIDLive", "autoWidth": true },
                { "data": "INVALIDLive", "name": "INVALIDLive", "autoWidth": true },
                { "data": "NMLive", "name": "NMLive", "autoWidth": true },
                { "data": "ABBREVNMLive", "name": "ABBREVNMLive", "autoWidth": true },
                { "data": "BASISCDLive", "name": "BASISCDLive", "autoWidth": true },
                { "data": "NMDTLive", "name": "NMDTLive", "autoWidth": true },
                { "data": "NMPREVLive", "name": "NMPREVLive", "autoWidth": true },
                { "data": "BASIS_PREVCDLive", "name": "BASIS_PREVCDLive", "autoWidth": true },
                { "data": "NMCHANGECDLive", "name": "NMCHANGECDLive", "autoWidth": true },
                { "data": "COMBPRODCDLive", "name": "COMBPRODCDLive", "autoWidth": true },
                { "data": "PRES_STATCDLive", "name": "PRES_STATCDLive", "autoWidth": true },
                { "data": "SUG_FLive", "name": "SUG_FLive", "autoWidth": true },
                { "data": "GLU_FLive", "name": "GLU_FLive", "autoWidth": true },
                { "data": "PRES_FLive", "name": "PRES_FLive", "autoWidth": true },
                { "data": "CFC_FLive", "name": "CFC_FLive", "autoWidth": true },
                { "data": "NON_AVAILCDLive", "name": "NON_AVAILCDLive", "autoWidth": true },
                { "data": "NON_AVAILDTLive", "name": "NON_AVAILDTLive", "autoWidth": true },
                { "data": "DF_INDCDLive", "name": "DF_INDCDLive", "autoWidth": true },
                { "data": "UDFSLive", "name": "UDFSLive", "autoWidth": true },
                { "data": "UDFS_UOMCDLive", "name": "UDFS_UOMCDLive", "autoWidth": true },
                { "data": "UNIT_DOSE_UOMCDLive", "name": "UNIT_DOSE_UOMCDLive", "autoWidth": true },
                { "data": "VMPS_IdLive", "name": "VMPS_IdLive", "autoWidth": true },

            ]
        });
    }

    function GetVmpDetailsForDelete() {

        $("#vtmDetailsDelete").DataTable().destroy();
        var TabId = "ToBeDeleted";
        var totalCount = document.getElementById("totalCount").value;
        var pageId = document.getElementById("hdnpageId").value;
        var changetSetFrom = $("#ddlChangetSetFrom").val();
        var changetSetTo = $("#ddlChangetSetTo").val();
        var searchValue = document.getElementById("hdnSearchValue").value;

        $("#vtmDetailsDelete").DataTable({
            "processing": true, // for show progress bar
            "serverSide": true, // for process server side
            "filter": true, // this is for disable filter (search box)
            "orderMulti": false, // for disable multiple column at once
            "ajax": {
                "url": "/Changeset/LoadData?tabID=" + TabId + "&TotalCount=" + totalCount + "&PageId=" + pageId + "&changetSetFrom=" + changetSetFrom + "&changetSetTo=" + changetSetTo + "&universalSearch=" + searchValue,
                "type": "POST",
                "datatype": "json"
            }, "initComplete": function () {
                var $searchInput = $('div.dataTables_filter input');
                $searchInput.unbind();
                $searchInput.bind('keyup', function (e) {
                    if (this.value.length > 3 || this.value.length == "") {
                        $("#vtmDetailsDelete").DataTable().search(this.value).draw();
                    }
                });
            }, "order": [[5, "asc"]],
            "aaSorting": [],
            "columnDefs":
            [{
                //"targets": [0],
                "visible": false,
                "searchable": false
            }],
            "columns": [

                { "data": "VPIDLive", "name": "VPIDLive", "autoWidth": true },
                { "data": "VPIDDTLive", "name": "VPIDDTLive", "autoWidth": true },
                { "data": "VPIDPREVLive", "name": "VPIDPREVLive", "autoWidth": true },
                { "data": "VTMIDLive", "name": "VTMIDLive", "autoWidth": true },
                { "data": "INVALIDLive", "name": "INVALIDLive", "autoWidth": true },
                { "data": "NMLive", "name": "NMLive", "autoWidth": true },
                { "data": "ABBREVNMLive", "name": "ABBREVNMLive", "autoWidth": true },
                { "data": "BASISCDLive", "name": "BASISCDLive", "autoWidth": true },
                { "data": "NMDTLive", "name": "NMDTLive", "autoWidth": true },
                { "data": "NMPREVLive", "name": "NMPREVLive", "autoWidth": true },
                { "data": "BASIS_PREVCDLive", "name": "BASIS_PREVCDLive", "autoWidth": true },
                { "data": "NMCHANGECDLive", "name": "NMCHANGECDLive", "autoWidth": true },
                { "data": "COMBPRODCDLive", "name": "COMBPRODCDLive", "autoWidth": true },
                { "data": "PRES_STATCDLive", "name": "PRES_STATCDLive", "autoWidth": true },
                { "data": "SUG_FLive", "name": "SUG_FLive", "autoWidth": true },
                { "data": "GLU_FLive", "name": "GLU_FLive", "autoWidth": true },
                { "data": "PRES_FLive", "name": "PRES_FLive", "autoWidth": true },
                { "data": "CFC_FLive", "name": "CFC_FLive", "autoWidth": true },
                { "data": "NON_AVAILCDLive", "name": "NON_AVAILCDLive", "autoWidth": true },
                { "data": "NON_AVAILDTLive", "name": "NON_AVAILDTLive", "autoWidth": true },
                { "data": "DF_INDCDLive", "name": "DF_INDCDLive", "autoWidth": true },
                { "data": "UDFSLive", "name": "UDFSLive", "autoWidth": true },
                { "data": "UDFS_UOMCDLive", "name": "UDFS_UOMCDLive", "autoWidth": true },
                { "data": "UNIT_DOSE_UOMCDLive", "name": "UNIT_DOSE_UOMCDLive", "autoWidth": true },
                { "data": "VMPS_IdLive", "name": "VMPS_IdLive", "autoWidth": true },

            ]
        });

    }

    function GetToChangeSetId(fromchangesetId) {

        var procemessage = "<option value='0'> Please wait...</option>";
        $("#ddlChangetSetTo").html(procemessage).show();
        var url = "/Changeset/GetToChangesetDetails/";
        CheckallItem();
        $.ajax({
            url: url,
            data: { fromchangesetId: fromchangesetId },
            cache: false,
            type: "POST",
            success: function (data) {
                var markup = "<option value='0'>--Select--</option>";
                for (var x = 0; x < data.length; x++) {
                    markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";
                }
                $("#ddlChangetSetTo").html(markup).show();
            },
            error: function (reponse) {
                alert("error : " + reponse);
            }
        });

    }

    function ExportDataToCSVData(IsDownloadsqlQuery)
    {

        var TabId = document.getElementById("TabId").value;
        var totalCount = document.getElementById("totalCount").value;
        var pageId = document.getElementById("hdnpageId").value;
        var changetSetFrom = $("#ddlChangetSetFrom").val();
        var changetSetTo = $("#ddlChangetSetTo").val();
        var BusinessUser = document.getElementById("hdnBusinessUser").value;
        CheckallItem();
        var allItem = document.getElementById("AllItem").checked;
        var url = "/Changeset/ExportDataToCSV?tabID=" + TabId + "&TotalCount=" + totalCount + "&PageId=" + pageId + "&changetSetFrom=" + changetSetFrom + "&changetSetTo=" + changetSetTo + "&allItem=" + allItem + "&BusinessUser=" + BusinessUser + "&IsDownloadsqlQuery=" + IsDownloadsqlQuery;

        $.ajax({
            url: url,
            data: { TabId: TabId },
            cache: false,
            type: "POST",
            success: function (data) {
                window.location = '@Url.Action("DownloadAttachment", "Changeset")/?pageId=' + pageId + "&IsDownloadsqlQuery=" + IsDownloadsqlQuery;

            },
            error: function (reponse) {
                alert("error : " + reponse);
            }
        });

    }
    function CheckallItem() {

        var allItem = document.getElementById("AllItem").checked;
        if (allItem) {
            document.getElementById("ddlChangetSetFrom").disabled = true;
            document.getElementById("ddlChangetSetTo").disabled = true;
            document.getElementById("AllItems").disabled = true;
        }
        else {
            document.getElementById("ddlChangetSetFrom").disabled = false;
            document.getElementById("ddlChangetSetTo").disabled = false;
            document.getElementById("AllItems").disabled = false;
        }

    }

</script>
